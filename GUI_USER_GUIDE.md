# OFC Solver GUI 使用說明書

## 🚀 快速開始

### 1. 安裝 GUI 依賴

```bash
cd "/Users/chenpowen/Python Projects/PineappleSolver"
pip install streamlit pandas
```

### 2. 啟動 API 服務器（必須先啟動）

```bash
# 在第一個終端窗口
python run_api.py
```

### 3. 啟動 GUI

```bash
# 在第二個終端窗口
streamlit run gui/app.py
```

GUI 會自動在瀏覽器中打開，通常是 http://localhost:8501

## 📱 界面說明

### 主界面分為三個標籤頁：

#### 1. 🎮 求解器（主要功能）

左側為輸入區域，右側為結果顯示區域。

**輸入區域包含：**
- **當前抽到的牌**：輸入您剛抽到的牌
- **玩家1當前牌局**：輸入您已經擺放的牌
- **玩家2當前牌局**：輸入對手已經擺放的牌

**結果區域顯示：**
- 最佳放置策略
- 期望分數
- 置信度
- 計算時間
- 其他可選策略

#### 2. 📖 使用說明

詳細的輸入格式說明和遊戲規則。

#### 3. 📈 歷史記錄

查看之前的求解記錄。

### 側邊欄功能：

- **求解器設置**：調整計算參數
- **API 狀態**：檢查服務器連接

## 🎴 卡牌輸入格式

### 基本格式
每張牌由兩個字符組成：`[點數][花色]`

### 點數表示：
- `2-9`：直接使用數字
- `T`：表示 10
- `J`：Jack（J）
- `Q`：Queen（Q）
- `K`：King（K）
- `A`：Ace（A）

### 花色表示：
- `s`：♠ 黑桃（Spades）
- `h`：♥ 紅心（Hearts）
- `d`：♦ 方塊（Diamonds）
- `c`：♣ 梅花（Clubs）

### 輸入範例：
- 單張牌：`As`（黑桃A）
- 多張牌：`As Kh Qd Jc Ts`（用空格分隔）

## 📋 使用步驟

### 場景1：初始5張牌擺放

1. 在「當前抽到的牌」輸入：`As Kh Qd Jc Ts`
2. 其他欄位留空（表示還沒有擺放任何牌）
3. 點擊「🎯 求解最佳策略」
4. 查看右側的建議擺放位置

### 場景2：中局決策

1. 輸入當前抽到的牌（例如：`9h`）
2. 輸入玩家1已擺放的牌：
   - 前墩：`Ah Ad`
   - 中墩：`Ks Qs Js`
   - 後墩：`7c 7d`
3. 輸入玩家2已擺放的牌（如果知道）
4. 點擊求解

### 場景3：完整遊戲

依次輸入每一輪抽到的牌，GUI 會持續給出最佳建議。

## ⚙️ 求解器設置說明

### 時間限制（1-60秒）
- 預設：10秒
- 建議：重要決策使用30秒，一般決策10秒足夠

### 線程數（1-8）
- 預設：4線程
- 根據您的CPU核心數調整

### 模擬次數（1000-1000000）
- 預設：100000次
- 更多模擬次數 = 更準確的結果

## 🎯 結果解讀

### 最佳放置策略
顯示每張牌應該放在哪一墩（前/中/後）

### 期望分數
預測這種擺法的平均得分

### 置信度
求解器對結果的確定程度（越高越可靠）

### 其他可選策略
顯示次優的選擇，包含訪問次數和平均獎勵

## ❓ 常見問題

### Q: 無法連接到 API 服務器？
A: 確保先運行 `python run_api.py` 啟動 API 服務器

### Q: 輸入格式錯誤？
A: 檢查是否使用正確的格式，例如 10 要寫成 T

### Q: 求解時間太長？
A: 降低時間限制或模擬次數

### Q: 結果不合理？
A: 增加時間限制和模擬次數以獲得更準確的結果

## 🎮 遊戲規則提醒

1. **前墩**（3張）< **中墩**（5張）< **後墩**（5張）
2. 違反大小順序會犯規（爆牌）
3. 特殊牌型有額外獎勵
4. Fantasy Land 需要前墩 QQ+ 或中墩 FH+ 或後墩 4條+

## 💡 使用技巧

1. **初始5張**：這是最關鍵的決策，建議使用較長的計算時間
2. **觀察對手**：輸入對手的牌可以獲得更準確的建議
3. **風險管理**：注意置信度，低置信度時要謹慎
4. **學習模式**：查看「其他可選策略」來理解不同選擇的優劣

---

如有其他問題，請參考專案文檔或聯繫開發者。